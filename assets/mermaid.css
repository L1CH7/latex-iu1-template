/* assets/mermaid.css */

/* 1. Применяем шрифт ко всему */
body, g, text, tspan, div, .node, .label, .edgeLabel, .cluster-label, foreignObject {
    font-family: 'GOST2304 Type A', sans-serif !important;
    font-style: italic !important; /* Наклон по ГОСТ */
    /* font-weight: bold !important; */
    /* font-size: 16px !important;    Размер чуть больше стандартного */
    line-height: 1.2 !important;   /* Чтобы строки не слипались */
}

/* 2. Лечим наложение текста */
/* Заставляем контейнеры с текстом быть прозрачными, чтобы не перекрывали линии, если вдруг наедут */
.label {
    background-color: rgba(255,255,255, 0.8) !important; 
}

/* 3. Делаем линии чуть жирнее (как на чертежах) */
.node rect, .node circle, .node polygon, .node path {
    stroke-width: 1.5px !important;
    stroke: #000 !important; /* Черный контур */
}
.edgePath .path {
    stroke-width: 1.5px !important;
    stroke: #000 !important;
}
.arrowheadPath {
    fill: #000 !important;
}
/* Увеличиваем отступ снизу у заголовков подграфов */
.cluster-label, .label {
    padding-bottom: 20px !important; /* Добавляем "воздух" снизу */
    margin-right: 2px !important; /* Добавляем "воздух" снизу */
    line-height: 1.3 !important;     /* Чуть плотнее строки */
    display: block !important;       /* Гарантируем блочное отображение */
}

/* Главный контейнер текста в режиме htmlLabels: true */
.label div, .node foreignObject div {
    /* 1. Включаем поддержку переносов */
    white-space: pre-wrap !important;  /* Учитывать и <br>, и \n */
    word-wrap: break-word !important;  /* Ломать длинные слова, если надо */
    
    /* 2. Центрирование (чтобы строки после <br> не уезжали влево) */
    text-align: center !important;
    display: flex !important;
    flex-direction: column !important; /* Строки друг под другом */
    justify-content: center !important;
    align-items: center !important;
    
    /* 3. Шрифты и отступы */
    font-family: 'GOST2304 Type A', sans-serif !important;
    font-size: 22px !important;
    line-height: 1.3 !important; /* Чуть больше воздуха между строками */
    
    /* 4. Компенсация курсива (тот самый &nbsp; можно усилить паддингом) */
    padding-right: 5px !important; 
    padding-left: 5px !important;
    width: 100% !important; /* Растянуть на всю ширину узла */
}

/* 1. СТИЛЬ ФЕЙКОВОГО ЗАГОЛОВКА */
/* Убираем рамку и фон, оставляем только жирный текст */
.node.subgraph-title rect {
    stroke: none !important;
    fill: none !important;
}
.node.subgraph-title .label {
    font-weight: bold !important;
    font-size: 24px !important;
    color: #000 !important;
}

/* 2. СТИЛЬ РАСПОРКИ (SPACER) */
/* Полностью невидимый узел */
.node.spacer rect {
    stroke: none !important;
    fill: none !important;
}
.node.spacer .label {
    opacity: 0 !important; /* Текст внутри (пробелы) тоже скрываем */
}